<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title data-i18n="options_title">Send-to-AI Options</title>
  <link rel="stylesheet" href="../styles/style.css" />
  <link rel="stylesheet" href="options.css" />
</head>
<body>
  <div class="options-container">
    <aside class="options-nav">
      <div class="logo-header">
        <img src="../assets/icons/icon.svg" class="logo" alt="logo" />
        <h1 data-i18n="options_title">Send-to-AI</h1>
      </div>
      <nav>
        <a href="#general" class="nav-item active" data-i18n="general_heading">General</a>
        <a href="#platforms" class="nav-item" data-i18n="platforms_heading">Platforms</a>
        <a href="#templates" class="nav-item" data-i18n="templates_heading">Prompt Templates</a>
      </nav>
    </aside>

    <main class="options-content">
      <header class="content-header">
        <div>
          <h2 id="content-title" data-i18n="general_settings_heading">General Settings</h2>
          <p class="muted" data-i18n="options_subtitle">Manage default settings, platforms, and prompt templates.</p>
        </div>
        <button id="locale-switcher" class="locale-switcher-toggle">
          <span class="icon"></span>
          <span class="label"></span>
        </button>
      </header>

      <section id="general" class="content-section card active">
        <div class="row">
          <label for="defaultLang" data-i18n="default_translation_label">Default translation language</label>
          <select id="defaultLang">
            <option value="English" data-i18n="lang_english">English</option>
            <option value="Vietnamese" data-i18n="lang_vietnamese">Vietnamese</option>
            <option value="Spanish" data-i18n="lang_spanish">Spanish</option>
            <option value="French" data-i18n="lang_french">French</option>
            <option value="German" data-i18n="lang_german">German</option>
            <option value="Chinese (Simplified)" data-i18n="lang_chinese_simplified">Chinese (Simplified)</option>
            <option value="Chinese (Traditional)" data-i18n="lang_chinese_traditional">Chinese (Traditional)</option>
            <option value="Japanese" data-i18n="lang_japanese">Japanese</option>
            <option value="Korean" data-i18n="lang_korean">Korean</option>
            <option value="Portuguese" data-i18n="lang_portuguese">Portuguese</option>
            <option value="Russian" data-i18n="lang_russian">Russian</option>
            <option value="Arabic" data-i18n="lang_arabic">Arabic</option>
            <option value="Hindi" data-i18n="lang_hindi">Hindi</option>
            <option value="Italian" data-i18n="lang_italian">Italian</option>
            <option value="Dutch" data-i18n="lang_dutch">Dutch</option>
          </select>
        </div>
        <div class="row actions">
          <div></div>
          <div>
            <button id="saveSettings" class="primary" data-i18n="save_settings">Save Settings</button>
            <button id="resetSettings" class="secondary" data-i18n="reset_settings">Reset to defaults</button>
          </div>
        </div>
      </section>

      <section id="platforms" class="content-section card">
        <div class="section-header">
          <h2 data-i18n="platforms_heading">Platforms (custom endpoints)</h2>
          <button id="addPlatform" class="primary" data-i18n="add_platform">Add Platform</button>
        </div>
        <div id="platformList" class="list"></div>
      </section>

      <section id="templates" class="content-section card">
        <div class="section-header">
          <h2 data-i18n="templates_heading">Prompt Templates</h2>
          <button id="addTemplate" class="primary" data-i18n="add_template">Add Template</button>
        </div>
        <div id="templateList" class="list"></div>
      </section>

      <footer class="content-footer">
        <p class="muted small" data-i18n="storage_and_usage_info"></p>
      </footer>
    </main>
  </div>

  <script type="module" src="options.js"></script>

  <!-- Inline editor modal (used for platforms and templates) -->
  <div id="editorModal" class="modal hidden" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal-backdrop"></div>
    <div class="modal-content" role="document">
      <div class="modal-header">
        <h3 id="modalTitle" data-i18n="modal_title_edit">Edit</h3>
        <button id="modalClose" class="icon-btn">&times;</button>
      </div>
      <form id="modalForm">
        <div id="platformFields">
          <label><span data-i18n="modal_label_name">Name</span><input id="modal_platform_name" required /></label>
          <label><span data-i18n="modal_label_base_url">Base URL</span><input type="url" id="modal_platform_url" data-i18n="modal_placeholder_url" data-i18n-target="placeholder" /></label>
          <label><span data-i18n="modal_label_input_selector">Message input selector</span><input id="modal_platform_input_selector" data-i18n="modal_placeholder_input_selector" data-i18n-target="placeholder" /></label>
          <label><span data-i18n="modal_label_send_selector">Send button selector</span><input id="modal_platform_send_selector" data-i18n="modal_placeholder_send_selector" data-i18n-target="placeholder" /></label>
        </div>

        <div id="templateFields">
          <label><span data-i18n="modal_label_action">Action</span>
            <select id="modal_template_action">
              <option value="answer" data-i18n="action_answer">Answer</option>
              <option value="rewrite" data-i18n="action_rewrite">Rewrite</option>
              <option value="translate" data-i18n="action_translate">Translate</option>
            </select>
          </label>
          <label><span data-i18n="modal_label_template_name">Template Name</span><input id="modal_template_name" required /></label>
          <label><span data-i18n="modal_label_template_text">Template Text</span><textarea id="modal_template_text" rows="4"></textarea></label>
        </div>

        <div class="row actions" style="margin-top:16px">
          <div></div>
          <div>
            <button type="button" id="modalSave" class="primary" data-i18n="modal_save">Save</button>
            <button type="button" id="modalCancel" class="secondary" data-i18n="modal_cancel">Cancel</button>
          </div>
        </div>
      </form>
    </div>
  </div>
  <!-- Toast container for non-blocking notifications -->
  <div id="toastContainer" aria-live="polite" aria-atomic="true"></div>
</body>
</html>